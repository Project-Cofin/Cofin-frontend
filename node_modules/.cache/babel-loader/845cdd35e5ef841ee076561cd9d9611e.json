{"ast":null,"code":"import _classCallCheck from\"C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import*as React from'react';import{Chart,AreaSeries,BarSeries,SplineSeries,ScatterSeries,ArgumentAxis,ValueAxis,Title,Legend,Tooltip}from'@devexpress/dx-react-chart-bootstrap4';import'@devexpress/dx-react-chart-bootstrap4/dist/dx-react-chart-bootstrap4.css';import{ValueScale,Stack,Animation,EventTracker,HoverState}from'@devexpress/dx-react-chart';import{connectProps}from'@devexpress/dx-react-core';import{format}from'd3-format';import{oilProduction}from'../demo-data/data-vizualization';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var consumptionSeriesName='Consumption';var consumptionColor='#41c0f0';var priceColor='#fcd45a';var makeLabel=function makeLabel(symbol,color){return function(_ref){var text=_ref.text,style=_ref.style,restProps=_objectWithoutProperties(_ref,[\"text\",\"style\"]);return/*#__PURE__*/_jsx(ValueAxis.Label,_objectSpread({text:\"\".concat(text,\" \").concat(symbol),style:_objectSpread({fill:color},style)},restProps));};};var PriceLabel=makeLabel('$',priceColor);var LabelWithThousand=makeLabel('k',consumptionColor);var patchProps=function patchProps(_ref2){var hoverIndex=_ref2.hoverIndex,props=_objectWithoutProperties(_ref2,[\"hoverIndex\"]);return _objectSpread({state:props.index===hoverIndex?'hovered':null},props);};var BarPoint=function BarPoint(props){return/*#__PURE__*/_jsx(BarSeries.Point,_objectSpread({},patchProps(props)));};var pointOptions={size:7};var getPointOptions=function getPointOptions(state){return state?{size:7}:{size:0};};var AreaPoint=function AreaPoint(props){var patched=patchProps(props);return/*#__PURE__*/_jsx(ScatterSeries.Point,_objectSpread({point:getPointOptions(patched.state)},patched));};var AreaWithPoints=function AreaWithPoints(_ref3){var state=_ref3.state,props=_objectWithoutProperties(_ref3,[\"state\"]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(AreaSeries.Path,_objectSpread({},props)),/*#__PURE__*/_jsx(ScatterSeries.Path,_objectSpread({},props))]});};var SplinePoint=function SplinePoint(props){return/*#__PURE__*/_jsx(ScatterSeries.Point,_objectSpread({point:pointOptions},patchProps(props)));};var SplineWithPoints=function SplineWithPoints(props){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(SplineSeries.Path,_objectSpread({},props)),/*#__PURE__*/_jsx(ScatterSeries.Path,_objectSpread({},props))]});};var series=[{name:'USA',key:'usa',color:'#08abbd'},{name:'Saudi Arabia',key:'saudiArabia',color:'#78bc97'},{name:'Iran',key:'iran',color:'#d4d67e'},{name:'Mexico',key:'mexico',color:'#9ccc65'},{name:'Russia',key:'russia',color:'#1698af'},{name:consumptionSeriesName,key:'consumption',color:consumptionColor,type:AreaSeries},{name:'Oil Price',key:'price',color:priceColor,scale:'price',type:SplineSeries}];var legendRootStyle={display:'flex',margin:'auto',flexDirection:'row'};var LegendRoot=function LegendRoot(props){return/*#__PURE__*/_jsx(Legend.Root,_objectSpread(_objectSpread({},props),{},{style:legendRootStyle}));};var legendItemStyle={flexDirection:'column',marginLeft:'-2px',marginRight:'-2px'};var LegendItem=function LegendItem(props){return/*#__PURE__*/_jsx(Legend.Item,_objectSpread(_objectSpread({},props),{},{style:legendItemStyle}));};var legendLabelStyle={whiteSpace:'nowrap'};var LegendLabel=function LegendLabel(props){return/*#__PURE__*/_jsx(Legend.Label,_objectSpread(_objectSpread({},props),{},{style:legendLabelStyle}));};var formatTooltip=format('.1f');var TooltipContent=function TooltipContent(_ref4){var data=_ref4.data,text=_ref4.text,style=_ref4.style,props=_objectWithoutProperties(_ref4,[\"data\",\"text\",\"style\"]);var alignStyle=_objectSpread(_objectSpread({},style),{},{paddingLeft:'10px'});var items=series.map(function(_ref5){var name=_ref5.name,key=_ref5.key,color=_ref5.color;var val=data[key];return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"svg\",{width:\"10\",height:\"10\",children:/*#__PURE__*/_jsx(\"circle\",{cx:\"5\",cy:\"5\",r:\"5\",fill:color})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Tooltip.Content,_objectSpread({style:alignStyle,text:name},props))}),/*#__PURE__*/_jsx(\"td\",{align:\"right\",children:/*#__PURE__*/_jsx(Tooltip.Content,_objectSpread({style:alignStyle,text:val?formatTooltip(val):'N/A'},props))})]},key);});return/*#__PURE__*/_jsx(\"table\",{children:items});};var stacks=[{series:series.filter(function(obj){return!obj.type;}).map(function(obj){return obj.name;})}];var modifyOilDomain=function modifyOilDomain(domain){return[domain[0],2200];};var modifyPriceDomain=function modifyPriceDomain(){return[0,110];};var getHoverIndex=function getHoverIndex(_ref6){var target=_ref6.target;return target?target.point:-1;};var MainChart=/*#__PURE__*/function(_React$PureComponent){_inherits(MainChart,_React$PureComponent);var _super=_createSuper(MainChart);function MainChart(props){var _this;_classCallCheck(this,MainChart);_this=_super.call(this,props);_this.state={data:oilProduction,target:null};_this.changeHover=function(target){return _this.setState({target:target?{series:consumptionSeriesName,point:target.point}:null});};_this.createComponents();_this.createSeries();return _this;}_createClass(MainChart,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(getHoverIndex(prevState)!==getHoverIndex(this.state)){this.BarPoint.update();this.SplinePoint.update();this.AreaPoint.update();this.TooltipContent.update();}}},{key:\"createComponents\",value:function createComponents(){var _this2=this;var getHoverProps=function getHoverProps(){return{hoverIndex:getHoverIndex(_this2.state)};};this.BarPoint=connectProps(BarPoint,getHoverProps);this.SplinePoint=connectProps(SplinePoint,getHoverProps);this.AreaPoint=connectProps(AreaPoint,getHoverProps);this.TooltipContent=connectProps(TooltipContent,function(){var _this2$state=_this2.state,data=_this2$state.data,target=_this2$state.target;return{data:target?data[target.point]:null};});}},{key:\"createSeries\",value:function createSeries(){var _this3=this;this.series=series.map(function(_ref7){var name=_ref7.name,key=_ref7.key,color=_ref7.color,type=_ref7.type,scale=_ref7.scale;var props={key:name,name:name,valueField:key,argumentField:'year',color:color,scaleName:scale||'oil',pointComponent:_this3.BarPoint};if(type===AreaSeries){props.seriesComponent=AreaWithPoints;props.pointComponent=_this3.AreaPoint;}else if(type){props.seriesComponent=SplineWithPoints;props.pointComponent=_this3.SplinePoint;}return/*#__PURE__*/React.createElement(type||BarSeries,props);});}},{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,target=_this$state.target;return/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(Chart,{data:data,children:[/*#__PURE__*/_jsx(ValueScale,{name:\"oil\",modifyDomain:modifyOilDomain}),/*#__PURE__*/_jsx(ValueScale,{name:\"price\",modifyDomain:modifyPriceDomain}),/*#__PURE__*/_jsx(ArgumentAxis,{}),/*#__PURE__*/_jsx(ValueAxis,{scaleName:\"oil\",labelComponent:LabelWithThousand}),/*#__PURE__*/_jsx(ValueAxis,{scaleName:\"price\",position:\"right\",labelComponent:PriceLabel}),/*#__PURE__*/_jsx(Title,{text:\"Oil production vs Oil price\"}),this.series,/*#__PURE__*/_jsx(Animation,{}),/*#__PURE__*/_jsx(Legend,{position:\"bottom\",rootComponent:LegendRoot,itemComponent:LegendItem,labelComponent:LegendLabel}),/*#__PURE__*/_jsx(Stack,{stacks:stacks}),/*#__PURE__*/_jsx(EventTracker,{}),/*#__PURE__*/_jsx(HoverState,{hover:target,onHoverChange:this.changeHover}),/*#__PURE__*/_jsx(Tooltip,{targetItem:target,contentComponent:this.TooltipContent})]})});}}]);return MainChart;}(React.PureComponent);export{MainChart as default};","map":{"version":3,"sources":["C:/Users/bitcamp/Desktop/cofin-msa-board/frontend/src/features/corona/components/MainChart.js"],"names":["React","Chart","AreaSeries","BarSeries","SplineSeries","ScatterSeries","ArgumentAxis","ValueAxis","Title","Legend","Tooltip","ValueScale","Stack","Animation","EventTracker","HoverState","connectProps","format","oilProduction","consumptionSeriesName","consumptionColor","priceColor","makeLabel","symbol","color","text","style","restProps","fill","PriceLabel","LabelWithThousand","patchProps","hoverIndex","props","state","index","BarPoint","pointOptions","size","getPointOptions","AreaPoint","patched","AreaWithPoints","SplinePoint","SplineWithPoints","series","name","key","type","scale","legendRootStyle","display","margin","flexDirection","LegendRoot","legendItemStyle","marginLeft","marginRight","LegendItem","legendLabelStyle","whiteSpace","LegendLabel","formatTooltip","TooltipContent","data","alignStyle","paddingLeft","items","map","val","stacks","filter","obj","modifyOilDomain","domain","modifyPriceDomain","getHoverIndex","target","point","MainChart","changeHover","setState","createComponents","createSeries","prevProps","prevState","update","getHoverProps","valueField","argumentField","scaleName","pointComponent","seriesComponent","createElement","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  Chart,\r\n  AreaSeries,\r\n  BarSeries,\r\n  SplineSeries,\r\n  ScatterSeries,\r\n  ArgumentAxis,\r\n  ValueAxis,\r\n  Title,\r\n  Legend,\r\n  Tooltip,\r\n} from '@devexpress/dx-react-chart-bootstrap4';\r\nimport '@devexpress/dx-react-chart-bootstrap4/dist/dx-react-chart-bootstrap4.css';\r\nimport {\r\n  ValueScale,\r\n  Stack,\r\n  Animation,\r\n  EventTracker,\r\n  HoverState,\r\n} from '@devexpress/dx-react-chart';\r\nimport { connectProps } from '@devexpress/dx-react-core';\r\nimport { format } from 'd3-format';\r\n\r\nimport { oilProduction } from '../demo-data/data-vizualization';\r\n\r\nconst consumptionSeriesName = 'Consumption';\r\nconst consumptionColor = '#41c0f0';\r\nconst priceColor = '#fcd45a';\r\n\r\nconst makeLabel = (symbol, color) => ({ text, style, ...restProps }) => (\r\n  <ValueAxis.Label\r\n    text={`${text} ${symbol}`}\r\n    style={{\r\n      fill: color,\r\n      ...style,\r\n    }}\r\n    {...restProps}\r\n  />\r\n);\r\nconst PriceLabel = makeLabel('$', priceColor);\r\nconst LabelWithThousand = makeLabel('k', consumptionColor);\r\n\r\nconst patchProps = ({ hoverIndex, ...props }) => ({\r\n  state: props.index === hoverIndex ? 'hovered' : null,\r\n  ...props,\r\n});\r\n\r\nconst BarPoint = props => (\r\n  <BarSeries.Point {...patchProps(props)} />\r\n);\r\n\r\nconst pointOptions = { size: 7 };\r\nconst getPointOptions = state => (state ? { size: 7 } : { size: 0 });\r\n\r\nconst AreaPoint = (props) => {\r\n  const patched = patchProps(props);\r\n  return <ScatterSeries.Point point={getPointOptions(patched.state)} {...patched} />;\r\n};\r\n\r\nconst AreaWithPoints = ({ state, ...props }) => (\r\n  <React.Fragment>\r\n    <AreaSeries.Path {...props} />\r\n    <ScatterSeries.Path {...props} />\r\n  </React.Fragment>\r\n);\r\n\r\nconst SplinePoint = props => (\r\n  <ScatterSeries.Point point={pointOptions} {...patchProps(props)} />\r\n);\r\n\r\nconst SplineWithPoints = props => (\r\n  <React.Fragment>\r\n    <SplineSeries.Path {...props} />\r\n    <ScatterSeries.Path {...props} />\r\n  </React.Fragment>\r\n);\r\n\r\nconst series = [\r\n  { name: 'USA', key: 'usa', color: '#08abbd' },\r\n  { name: 'Saudi Arabia', key: 'saudiArabia', color: '#78bc97' },\r\n  { name: 'Iran', key: 'iran', color: '#d4d67e' },\r\n  { name: 'Mexico', key: 'mexico', color: '#9ccc65' },\r\n  { name: 'Russia', key: 'russia', color: '#1698af' },\r\n  {\r\n    name: consumptionSeriesName, key: 'consumption', color: consumptionColor, type: AreaSeries,\r\n  },\r\n  {\r\n    name: 'Oil Price', key: 'price', color: priceColor, scale: 'price', type: SplineSeries,\r\n  },\r\n];\r\n\r\nconst legendRootStyle = {\r\n  display: 'flex',\r\n  margin: 'auto',\r\n  flexDirection: 'row',\r\n};\r\nconst LegendRoot = props => (\r\n  <Legend.Root {...props} style={legendRootStyle} />\r\n);\r\n\r\nconst legendItemStyle = {\r\n  flexDirection: 'column',\r\n  marginLeft: '-2px',\r\n  marginRight: '-2px',\r\n};\r\nconst LegendItem = props => (\r\n  <Legend.Item {...props} style={legendItemStyle} />\r\n);\r\n\r\nconst legendLabelStyle = {\r\n  whiteSpace: 'nowrap',\r\n};\r\nconst LegendLabel = props => (\r\n  <Legend.Label {...props} style={legendLabelStyle} />\r\n);\r\n\r\nconst formatTooltip = format('.1f');\r\nconst TooltipContent = ({\r\n  data, text, style, ...props\r\n}) => {\r\n  const alignStyle = {\r\n    ...style,\r\n    paddingLeft: '10px',\r\n  };\r\n  const items = series.map(({ name, key, color }) => {\r\n    const val = data[key];\r\n    return (\r\n      <tr key={key}>\r\n        <td>\r\n          <svg width=\"10\" height=\"10\">\r\n            <circle cx=\"5\" cy=\"5\" r=\"5\" fill={color} />\r\n          </svg>\r\n        </td>\r\n        <td>\r\n          <Tooltip.Content style={alignStyle} text={name} {...props} />\r\n        </td>\r\n        <td align=\"right\">\r\n          <Tooltip.Content style={alignStyle} text={val ? formatTooltip(val) : 'N/A'} {...props} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n  return (\r\n    <table>\r\n      {items}\r\n    </table>\r\n  );\r\n};\r\n\r\nconst stacks = [\r\n  { series: series.filter(obj => !obj.type).map(obj => obj.name) },\r\n];\r\n\r\nconst modifyOilDomain = domain => [domain[0], 2200];\r\nconst modifyPriceDomain = () => [0, 110];\r\n\r\nconst getHoverIndex = ({ target }) => (target ? target.point : -1);\r\n\r\nexport default class MainChart extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: oilProduction,\r\n      target: null,\r\n    };\r\n\r\n    this.changeHover = target => this.setState({\r\n      target: target ? { series: consumptionSeriesName, point: target.point } : null,\r\n    });\r\n\r\n    this.createComponents();\r\n    this.createSeries();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (getHoverIndex(prevState) !== getHoverIndex(this.state)) {\r\n      this.BarPoint.update();\r\n      this.SplinePoint.update();\r\n      this.AreaPoint.update();\r\n      this.TooltipContent.update();\r\n    }\r\n  }\r\n\r\n  createComponents() {\r\n    const getHoverProps = () => ({\r\n      hoverIndex: getHoverIndex(this.state),\r\n    });\r\n    this.BarPoint = connectProps(BarPoint, getHoverProps);\r\n    this.SplinePoint = connectProps(SplinePoint, getHoverProps);\r\n    this.AreaPoint = connectProps(AreaPoint, getHoverProps);\r\n\r\n    this.TooltipContent = connectProps(TooltipContent, () => {\r\n      const { data, target } = this.state;\r\n      return { data: target ? data[target.point] : null };\r\n    });\r\n  }\r\n\r\n  createSeries() {\r\n    this.series = series.map(({\r\n      name, key, color, type, scale,\r\n    }) => {\r\n      const props = {\r\n        key: name,\r\n        name,\r\n        valueField: key,\r\n        argumentField: 'year',\r\n        color,\r\n        scaleName: scale || 'oil',\r\n        pointComponent: this.BarPoint,\r\n      };\r\n      if (type === AreaSeries) {\r\n        props.seriesComponent = AreaWithPoints;\r\n        props.pointComponent = this.AreaPoint;\r\n      } else if (type) {\r\n        props.seriesComponent = SplineWithPoints;\r\n        props.pointComponent = this.SplinePoint;\r\n      }\r\n      return React.createElement(type || BarSeries, props);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { data, target } = this.state;\r\n\r\n    return (\r\n      <div className=\"card\">\r\n        <Chart\r\n          data={data}\r\n        >\r\n          <ValueScale\r\n            name=\"oil\"\r\n            modifyDomain={modifyOilDomain}\r\n          />\r\n          <ValueScale\r\n            name=\"price\"\r\n            modifyDomain={modifyPriceDomain}\r\n          />\r\n\r\n          <ArgumentAxis />\r\n          <ValueAxis\r\n            scaleName=\"oil\"\r\n            labelComponent={LabelWithThousand}\r\n          />\r\n          <ValueAxis\r\n            scaleName=\"price\"\r\n            position=\"right\"\r\n            labelComponent={PriceLabel}\r\n          />\r\n\r\n          <Title\r\n            text=\"Oil production vs Oil price\"\r\n          />\r\n\r\n          {this.series}\r\n\r\n          <Animation />\r\n          <Legend\r\n            position=\"bottom\"\r\n            rootComponent={LegendRoot}\r\n            itemComponent={LegendItem}\r\n            labelComponent={LegendLabel}\r\n          />\r\n          <Stack stacks={stacks} />\r\n          <EventTracker />\r\n          <HoverState\r\n            hover={target}\r\n            onHoverChange={this.changeHover}\r\n          />\r\n          <Tooltip\r\n            targetItem={target}\r\n            contentComponent={this.TooltipContent}\r\n          />\r\n        </Chart>\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}